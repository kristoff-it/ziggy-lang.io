<!DOCTYPE html>
<html>
  <head id="head">
    <meta charset="UTF-8">
    <meta name="description" content="Ziggy: A JSON/YAML/TOML alternative.">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@croloris">
    <meta name="twitter:author" content="@croloris">
    <meta name="twitter:description" content="Ziggy: A JSON/YAML/TOML alternative.">
    <meta name="twitter:title" content="Neovim - Ziggy">
    <meta property="og:title" content="Neovim">
    <meta property="og:type" content="website">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta
    name="viewport"
    content="width=device-width, initial-scale=1, shrink-to-fit=no"
  >
    <title id="title">
      Neovim
      - Ziggy Data Language
    </title>
    <link rel="stylesheet" type="text/css" href="/fonts.css">
    <link rel="stylesheet" type="text/css" href="/style.css">
    <link rel="stylesheet" type="text/css" href="/highlight.css">
    
  <style>
    #content {
			display: flex;
			flex-direction: row;
			gap: 20px;
		}

		#sidebar {
			flex: 0 0 260px;
			padding-top: 0.67em;
		}

		#sidebar details {
			list-style: none;
		}

		#sidebar summary {
			border-top: 1px solid var(--border-color);
			list-style: none;
			padding: 10px 0;
			color: #333;
			font-weight: bold;
			padding-left: 10px;
		}

		#sidebar summary:hover {
			color: #111;
			background-color: #eee;
		}

		#sidebar ul {
			list-style: none;
			padding: 0;
			margin: 0 0 10px;
		}

		#sidebar a {
			display: block;
			text-decoration: none;
			padding: 5px 0;
			color: inherit;
			padding-left: 10px;
		}

		#sidebar a:hover, #sidebar .selected { 
			background-color: #ddd;
		}

		#sidebar-content {
			position: sticky;
			top: 110px;
		}

		#footer {
			display: flex;
			flex-direction: row;
			justify-content: space-between;
			width: 100%;
			margin-top: 50px;
			border-top: 1px solid var(--border-color);
			text-align: right;
		}

		#footer a {
			text-decoration: none;
			color: inherit;
		}

		#footer .title {
			font-weight: bold;
			color: #222;
			text-decoration: underline;
		}

		#main {
			max-width: 920px;
			flex-grow: 1;
		}

		#main h2 {
			margin-top: 1.5em;
			border-bottom: 2px dotted #aaa;
		}

		pre {
			margin: 10px;
			padding: 0;
			border: 1px dashed;
			border-radius: 0;
		}

		pre code {
			display: block;
			padding: 30px;
			padding-top: 0;
			padding-right: 0;
		}

		p code {
			background-color: #333;
			border-radius: 4px;
			color: white;
			padding: 0.2em;
		}

		pre::before {
			display: block;
			content: "Shell";
			background-color: #fff;
			font-family: "Epilogue", sans-serif;
			font-size: 0.7em;
			color: #555;
			padding: 10px;
			padding-left: 15px;
			padding-top: 12px;
			text-transform: uppercase;
			margin-bottom: 30px;
			position: sticky;
			top: 0;
			left: 0;
			z-index: 10;
		}

		pre:has(> code.markdown):before {
			content: "Markdown";
		}

		pre:has(> code.javascript):before {
			content: "JavaScript";
		}

		pre:has(> code.zig):before {
			content: "Zig";
		}

		pre:has(> code.lua):before {
			content: "Lua";
		}

		pre:has(> code.toml):before {
			content: "TOML";
		}

		pre:has(> code.json):before {
			content: "JSON";
		}

		pre:has(> code.ziggy):before {
			content: "Ziggy Document";
		}

		pre:has(> code.ziggy-schema):before {
			content: "Ziggy Schema";
		}


		@media (max-width: 1000px) {
			#content {
				padding: 0 15px;
				flex-direction: column-reverse;
			}

			#main {
				max-width: 1000px;
			}

		}

		
  #insanity {
    max-height: 400px;
    overflow-y: scroll;
  }
  </style>

  </head>
  <body id="body">
    <nav id="top-nav">
      <div id="top-nav-container">
        <span>
          <a href="/" style="font-size: 1.8em;font-family:'Glue Gun';font-weight:bold;text-decoration: none; color: black;">Ziggy</a>
          <span>v0.0.1</span>
        </span>
        <div id="top-nav-menu">
          <a href="/documentation/getting-started/">
            Quickstart
          </a>
          <a href="/documentation/about/">
            Documentation
          </a>
          <a href="/log/">
            Changelog
          </a>
          <a href="https://github.com/kristoff-it/ziggy" target="_blank">
            Code
          </a>
        </div>
      </div>
    </nav>
    
  <div id="content">
    <nav id="sidebar">
      <div id="sidebar-content">
        <details open>
          <summary>Overview</summary>
          <ul>
            <li>
              <a class="" href="/documentation/about/">About</a>
            </li>
          
            <li>
              <a class="" href="/documentation/getting-started/">Getting Started</a>
            </li>
          </ul>
        </details>
        <details open>
          <summary>Editor Configuration</summary>
          <ul>
            <li>
              <a class="" href="/documentation/editors/vscode/">VSCode</a>
            </li>
          
            <li>
              <a class="selected" href="/documentation/editors/neovim/">Neovim</a>
            </li>
          
            <li>
              <a class="" href="/documentation/editors/helix/">Helix</a>
            </li>
          
            <li>
              <a class="" href="/documentation/editors/flow/">Flow</a>
            </li>
          </ul>
        </details>
        <details open>
          <summary>Ziggy Document</summary>
          <ul>
            <li>
              <a class="" href="/documentation/scalars/">Scalar Values</a>
            </li>
          
            <li>
              <a class="" href="/documentation/containers/">Container Values</a>
            </li>
          
            <li>
              <a class="" href="/documentation/document/">Document Structure</a>
            </li>
          </ul>
        </details>
        <details open>
          <summary>Ziggy Schema</summary>
          <ul>
            <li>
              <a class="" href="/documentation/builtin-types/">Builtin Types</a>
            </li>
          
            <li>
              <a class="" href="/documentation/custom-types/">Custom Types</a>
            </li>
          
            <li>
              <a class="" href="/documentation/schema-structure/">Schema Structure</a>
            </li>
          </ul>
        </details>
        <details open>
          <summary>Design Tips</summary>
          <ul>
            <li>
              <a class="" href="/documentation/struct-unions/">Struct Unions</a>
            </li>
          
            <li>
              <a class="" href="/documentation/tagged-literals/">Tagged Literals</a>
            </li>
          </ul>
        </details>
        <details open>
          <summary>Libraries</summary>
          <ul>
            <li><a href="/documentation/parsers/">Parsers</a></li>
          </ul>
        </details>
        <details open>
          <summary>Ziggy CLI Tool</summary>
          <ul>
            <li>
              <a class="" href="/documentation/ziggy-fmt/">ziggy fmt</a>
            </li>
          
            <li>
              <a class="" href="/documentation/ziggy-query/">ziggy query</a>
            </li>
          
            <li>
              <a class="" href="/documentation/ziggy-check/">ziggy check</a>
            </li>
          
            <li>
              <a class="" href="/documentation/ziggy-convert/">ziggy convert</a>
            </li>
          
            <li>
              <a class="" href="/documentation/ziggy-lsp/">ziggy lsp</a>
            </li>
          </ul>
        </details>
        <details>
          <summary>Specification</summary>
          <ul>
            <li>
              <a class="" href="/documentation/spec/">Specification</a>
            </li>
          </ul>
        </details>
      </div>
    </nav>
    <div id="main">
      <div><h1>Neovim</h1><h2>Tree Sitter grammar and queries</h2><h3>1. Add the following lines to your <code>nvim-treesitter</code> config</h3><pre><code class="lua"><span class="keyword">local</span> <span class="variable">parser_config</span> <span class="operator">=</span> <span class="function call">require</span><span class="punctuation bracket">(</span><span class="string">"nvim-treesitter.parsers"</span><span class="punctuation bracket">)</span><span class="punctuation delimiter">.</span><span class="function call">get_parser_configs</span><span class="punctuation bracket">(</span><span class="punctuation bracket">)</span>
<span class="variable">parser_config</span><span class="punctuation delimiter">.</span><span class="field">ziggy</span> <span class="operator">=</span> <span class="constructor">{</span>
  <span class="field">install_info</span> <span class="operator">=</span> <span class="constructor">{</span>
    <span class="field">url</span> <span class="operator">=</span> <span class="string">"https://github.com/kristoff-it/ziggy"</span><span class="punctuation delimiter">,</span> <span class="comment">-- local path or git repo</span>
    <span class="field">includes</span> <span class="operator">=</span> <span class="constructor">{</span><span class="string">"tree-sitter-ziggy/src"</span><span class="constructor">}</span><span class="punctuation delimiter">,</span>
    <span class="field">files</span> <span class="operator">=</span> <span class="constructor">{</span><span class="string">"tree-sitter-ziggy/src/parser.c"</span><span class="constructor">}</span><span class="punctuation delimiter">,</span> <span class="comment">-- note that some parsers also require src/scanner.c or src/scanner.cc</span>
    <span class="comment">-- optional entries:</span>
    <span class="field">branch</span> <span class="operator">=</span> <span class="string">"main"</span><span class="punctuation delimiter">,</span> <span class="comment">-- default branch in case of git repo if different from master</span>
    <span class="field">generate_requires_npm</span> <span class="operator">=</span> <span class="boolean">false</span><span class="punctuation delimiter">,</span> <span class="comment">-- if stand-alone parser without npm dependencies</span>
    <span class="field">requires_generate_from_grammar</span> <span class="operator">=</span> <span class="boolean">false</span><span class="punctuation delimiter">,</span> <span class="comment">-- if folder contains pre-generated src/parser.c</span>
  <span class="constructor">}</span><span class="punctuation delimiter">,</span>
<span class="constructor">}</span>

<span class="variable">parser_config</span><span class="punctuation delimiter">.</span><span class="field">ziggy_schema</span> <span class="operator">=</span> <span class="constructor">{</span>
  <span class="field">install_info</span> <span class="operator">=</span> <span class="constructor">{</span>
    <span class="field">url</span> <span class="operator">=</span> <span class="string">"https://github.com/kristoff-it/ziggy"</span><span class="punctuation delimiter">,</span> <span class="comment">-- local path or git repo</span>
    <span class="field">files</span> <span class="operator">=</span> <span class="constructor">{</span><span class="string">"tree-sitter-ziggy-schema/src/parser.c"</span><span class="constructor">}</span><span class="punctuation delimiter">,</span> <span class="comment">-- note that some parsers also require src/scanner.c or src/scanner.cc</span>
    <span class="comment">-- optional entries:</span>
    <span class="field">branch</span> <span class="operator">=</span> <span class="string">"main"</span><span class="punctuation delimiter">,</span> <span class="comment">-- default branch in case of git repo if different from master</span>
    <span class="field">generate_requires_npm</span> <span class="operator">=</span> <span class="boolean">false</span><span class="punctuation delimiter">,</span> <span class="comment">-- if stand-alone parser without npm dependencies</span>
    <span class="field">requires_generate_from_grammar</span> <span class="operator">=</span> <span class="boolean">false</span><span class="punctuation delimiter">,</span> <span class="comment">-- if folder contains pre-generated src/parser.c</span>
  <span class="constructor">}</span><span class="punctuation delimiter">,</span>
  <span class="field">filetype</span> <span class="operator">=</span> <span class="string">"ziggy-schema"</span><span class="punctuation delimiter">,</span>
<span class="constructor">}</span>

<span class="variable">vim</span><span class="punctuation delimiter">.</span><span class="field">filetype</span><span class="punctuation delimiter">.</span><span class="function call">add</span><span class="punctuation bracket">(</span><span class="constructor">{</span>
  <span class="field">extension</span> <span class="operator">=</span> <span class="constructor">{</span>
    <span class="field">ziggy</span> <span class="operator">=</span> <span class="string">'ziggy'</span><span class="punctuation delimiter">,</span>
    <span class="punctuation bracket">[</span><span class="string">"ziggy-schema"</span><span class="punctuation bracket">]</span> <span class="operator">=</span> <span class="string">"ziggy_schema"</span><span class="punctuation delimiter">,</span>
  <span class="constructor">}</span>
<span class="constructor">}</span><span class="punctuation bracket">)</span>
</code></pre>
<h3>2. Copy Tree Sitter queries into your runtime path</h3><p>From the root of the <a href="https://github.com/kristoff-it/ziggy">Ziggy repository</a>:</p><ul><li><code>cp -rT tree-sitter-ziggy/queries NVIM_RUNTIME_PATH/queries/ziggy</code></li><li><code>cp -rT tree-sitter-ziggy-schema/queries NVIM_RUNTIME_PATH/queries/ziggy_schema</code></li></ul><p>NOTE: '-T' makes it so you can run the command multiple times without nesting new copies of <code>queries</code> more deeply than intended. Also macOS doesn't support it, sorry.</p><h3>3. Open Neovim and compile the grammars</h3><ul><li><code>:TSInstall ziggy</code></li><li><code>:TSInstall ziggy_schema</code></li></ul><h2>Autoformatting</h2><p>By using the <code>ziggy</code> CLI tool.</p><p>In your conform.nvim config add two new formatter definitions and map them to their corresponding filetype:</p><pre><code class="lua"><span class="variable">formatters</span> <span class="operator">=</span> <span class="constructor">{</span>
  <span class="field">ziggy</span> <span class="operator">=</span> <span class="constructor">{</span>
    <span class="field">inherit</span> <span class="operator">=</span> <span class="boolean">false</span><span class="punctuation delimiter">,</span>
    <span class="field">command</span> <span class="operator">=</span> <span class="string">"ziggy"</span><span class="punctuation delimiter">,</span>
    <span class="field">stdin</span> <span class="operator">=</span> <span class="boolean">true</span><span class="punctuation delimiter">,</span>
    <span class="field">args</span> <span class="operator">=</span> <span class="constructor">{</span> <span class="string">'fmt'</span><span class="punctuation delimiter">,</span> <span class="string">'--stdin'</span> <span class="constructor">}</span><span class="punctuation delimiter">,</span>
  <span class="constructor">}</span><span class="punctuation delimiter">,</span>
  <span class="field">ziggy_schema</span> <span class="operator">=</span> <span class="constructor">{</span>
    <span class="field">inherit</span> <span class="operator">=</span> <span class="boolean">false</span><span class="punctuation delimiter">,</span>
    <span class="field">command</span> <span class="operator">=</span> <span class="string">"ziggy"</span><span class="punctuation delimiter">,</span>
    <span class="field">stdin</span> <span class="operator">=</span> <span class="boolean">true</span><span class="punctuation delimiter">,</span>
    <span class="field">args</span> <span class="operator">=</span> <span class="constructor">{</span> <span class="string">'fmt'</span><span class="punctuation delimiter">,</span> <span class="string">'--stdin-schema'</span> <span class="constructor">}</span><span class="punctuation delimiter">,</span>
  <span class="constructor">}</span><span class="punctuation delimiter">,</span>
<span class="constructor">}</span><span class="punctuation delimiter">,</span>

<span class="function call">formatters_by_ft</span> <span class="operator">=</span> <span class="constructor">{</span>
  <span class="field">ziggy</span> <span class="operator">=</span> <span class="constructor">{</span> <span class="string">'ziggy'</span> <span class="constructor">}</span><span class="punctuation delimiter">,</span>
  <span class="field">ziggy_schema</span> <span class="operator">=</span> <span class="constructor">{</span> <span class="string">'ziggy_schema'</span> <span class="constructor">}</span><span class="punctuation delimiter">,</span>
<span class="constructor">}</span><span class="punctuation delimiter">,</span><span class="variable"></span><span class="variable builtin"></span><span class="constant"></span>
</code></pre>
<h2>LSP</h2><p>Add the following to your Neovim config:</p><pre><code class="lua"><span class="variable">vim</span><span class="punctuation delimiter">.</span><span class="field">api</span><span class="punctuation delimiter">.</span><span class="function call">nvim_create_autocmd</span><span class="punctuation bracket">(</span><span class="string">"FileType"</span><span class="punctuation delimiter">,</span> <span class="constructor">{</span>
  <span class="field">group</span> <span class="operator">=</span> <span class="variable">vim</span><span class="punctuation delimiter">.</span><span class="field">api</span><span class="punctuation delimiter">.</span><span class="function call">nvim_create_augroup</span><span class="punctuation bracket">(</span><span class="string">"ziggy"</span><span class="punctuation delimiter">,</span> <span class="constructor">{</span><span class="constructor">}</span><span class="punctuation bracket">)</span><span class="punctuation delimiter">,</span>
  <span class="field">pattern</span> <span class="operator">=</span> <span class="string">"ziggy"</span><span class="punctuation delimiter">,</span>
  <span class="field">callback</span> <span class="operator">=</span> <span class="keyword function">function</span><span class="punctuation bracket">(</span><span class="punctuation bracket">)</span>
    <span class="variable">vim</span><span class="punctuation delimiter">.</span><span class="field">lsp</span><span class="punctuation delimiter">.</span><span class="function call">start</span><span class="punctuation bracket">(</span><span class="constructor">{</span>
      <span class="field">name</span> <span class="operator">=</span> <span class="string">"Ziggy LSP"</span><span class="punctuation delimiter">,</span>
      <span class="field">cmd</span> <span class="operator">=</span> <span class="constructor">{</span> <span class="string">"ziggy"</span><span class="punctuation delimiter">,</span> <span class="string">"lsp"</span> <span class="constructor">}</span><span class="punctuation delimiter">,</span>
      <span class="field">root_dir</span> <span class="operator">=</span> <span class="variable">vim</span><span class="punctuation delimiter">.</span><span class="field">loop</span><span class="punctuation delimiter">.</span><span class="function call">cwd</span><span class="punctuation bracket">(</span><span class="punctuation bracket">)</span><span class="punctuation delimiter">,</span>
      <span class="field">flags</span> <span class="operator">=</span> <span class="constructor">{</span> <span class="field">exit_timeout</span> <span class="operator">=</span> <span class="number">1000</span> <span class="constructor">}</span><span class="punctuation delimiter">,</span>
    <span class="constructor">}</span><span class="punctuation bracket">)</span>
  <span class="keyword function">end</span><span class="punctuation delimiter">,</span>
<span class="constructor">}</span><span class="punctuation bracket">)</span>
<span class="variable">vim</span><span class="punctuation delimiter">.</span><span class="field">api</span><span class="punctuation delimiter">.</span><span class="function call">nvim_create_autocmd</span><span class="punctuation bracket">(</span><span class="string">"FileType"</span><span class="punctuation delimiter">,</span> <span class="constructor">{</span>
  <span class="field">group</span> <span class="operator">=</span> <span class="variable">vim</span><span class="punctuation delimiter">.</span><span class="field">api</span><span class="punctuation delimiter">.</span><span class="function call">nvim_create_augroup</span><span class="punctuation bracket">(</span><span class="string">"ziggy_schema"</span><span class="punctuation delimiter">,</span> <span class="constructor">{</span><span class="constructor">}</span><span class="punctuation bracket">)</span><span class="punctuation delimiter">,</span>
  <span class="field">pattern</span> <span class="operator">=</span> <span class="string">"ziggy_schema"</span><span class="punctuation delimiter">,</span>
  <span class="field">callback</span> <span class="operator">=</span> <span class="keyword function">function</span><span class="punctuation bracket">(</span><span class="punctuation bracket">)</span>
    <span class="variable">vim</span><span class="punctuation delimiter">.</span><span class="field">lsp</span><span class="punctuation delimiter">.</span><span class="function call">start</span><span class="punctuation bracket">(</span><span class="constructor">{</span>
      <span class="field">name</span> <span class="operator">=</span> <span class="string">"Ziggy LSP"</span><span class="punctuation delimiter">,</span>
      <span class="field">cmd</span> <span class="operator">=</span> <span class="constructor">{</span> <span class="string">"ziggy"</span><span class="punctuation delimiter">,</span> <span class="string">"lsp"</span><span class="punctuation delimiter">,</span> <span class="string">"--schema"</span> <span class="constructor">}</span><span class="punctuation delimiter">,</span>
      <span class="field">root_dir</span> <span class="operator">=</span> <span class="variable">vim</span><span class="punctuation delimiter">.</span><span class="field">loop</span><span class="punctuation delimiter">.</span><span class="function call">cwd</span><span class="punctuation bracket">(</span><span class="punctuation bracket">)</span><span class="punctuation delimiter">,</span>
      <span class="field">flags</span> <span class="operator">=</span> <span class="constructor">{</span> <span class="field">exit_timeout</span> <span class="operator">=</span> <span class="number">1000</span> <span class="constructor">}</span><span class="punctuation delimiter">,</span>
    <span class="constructor">}</span><span class="punctuation bracket">)</span>
  <span class="keyword function">end</span><span class="punctuation delimiter">,</span>
<span class="constructor">}</span><span class="punctuation bracket">)</span>
</code></pre>
</div>
      <nav id="footer">
        <div>
          <a href="/documentation/editors/vscode/">
            <p>
              ←
              <span class="title">VSCode</span>
            </p>
          </a>
        </div>
        <div>
          <a href="/documentation/editors/flow/">
            <p>
              <span class="title">Flow</span>
              →
            </p>
          </a>
        </div>
      </nav>
    </div>
  </div>

  </body>
</html>